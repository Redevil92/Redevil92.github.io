import{S as w}from"./SelectedFolderDialog-Bx-eZ4KV.js";import{F as v}from"./FavouritesPanel-pBcxeB_N.js";import{d as S,i as x,r as p,v as C,A as k,f as u,o as f,c as A,e as I,g as E,l as O,n as H,C as B,T,D as b,E as L}from"./index-8lyaWh5H.js";const V=S({__name:"CompressedFileItem",props:{itemDialog:Object,height:{type:Number,default:200}},setup(l){const o=l,a=x(),{decompressFile:g,saveDecompressedFilesToDestination:D}=B(),r=p([]),n=p(!1);C(async()=>{var e,s,t;await d(T),(s=(e=o.itemDialog)==null?void 0:e.additionalOptions)!=null&&s.showExtractHereDialog&&(n.value=(t=o.itemDialog.additionalOptions)==null?void 0:t.showExtractHereDialog)}),k(async()=>{for(const e of r.value)await a.deleteFileSystemItem(e)});const h=async e=>{if(!await u.isDir(e)){const t={path:e,coordinates:{x:0,y:0},isSelected:!0};await a.createItemDialog(t)}},d=async e=>{var s,t;if((s=o.itemDialog)!=null&&s.path){let i=await u.readFile((t=o.itemDialog)==null?void 0:t.path);const m=g(i),c=await D(m,e);r.value=c,await a.refreshAllItemDialogFiles(),await a.fetchDesktopItems(),n.value=!1}},y=e=>{F(e.event,!1,e.filePath)},F=async(e,s=!1,t)=>{var c;e.preventDefault(),e.stopPropagation();const i=e,m=[b([t],!1,!1),await L([t])];a.setActionMenu({show:!0,paths:t?[t]:[(c=o.itemDialog)==null?void 0:c.path],position:{x:i.clientX,y:i.clientY},customLayout:m})};return(e,s)=>{var t;return f(),A("div",{style:H(` width: calc(100% -4px); height:${l.height-5}px`)},[n.value?(f(),I(w,{key:0,onOnFolderSelected:d,onCloseDialog:s[0]||(s[0]=i=>n.value=!1),showSaveAsInput:!1,actionButtonText:"Extract"})):E("",!0),O(v,{height:l.height-10,itemsList:r.value,canRename:!1,isFocused:(t=l.itemDialog)==null?void 0:t.isFocused,onOnDoubleClick:h,onOnRightClick:y},null,8,["height","itemsList","isFocused"])],4)}}});export{V as default};
