import{d as V,i as te,ae as K,r as m,j as C,w as se,aa as ae,b as ie,A as ne,o as l,c as r,a as n,K as h,y as g,a8 as _,g as w,F as I,m as z,k as p,Q as T,l as R,an as E,H,I as A,P as F,n as $,ao as oe,ap as le,f as re,aq as ce,p as U,h as W,_ as q}from"./index-8lyaWh5H.js";const ue=(t,k=2)=>{if(!+t)return"0 Bytes";const o=1024,v=k<0?0:k,x=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],y=Math.floor(Math.log(t)/Math.log(o));return`${parseFloat((t/Math.pow(o,y)).toFixed(v))} ${x[y]}`},B=t=>(U("data-v-3595e3bc"),t=t(),W(),t),de={key:0,class:"flex-align-center table-header"},ve=B(()=>n("div",{style:{width:"400px"}},"Name",-1)),he=B(()=>n("div",{style:{width:"170px"}},"Date modified",-1)),pe=B(()=>n("div",{style:{width:"100px"}},"Size",-1)),fe=[ve,he,pe],me=["onDblclick","onMousedown","onContextmenu"],ye=["onKeyup","onBlur"],ge={key:1,class:"file-text-preview"},we={class:"flex",style:{width:"400px"}},ke={key:0},xe=["onKeyup","onBlur"],_e={key:1,style:{width:"290px"},class:"file-text one-line-ellipsis noselect"},Se={key:0,class:"prop-field",style:{width:"170px"}},Fe={key:1,class:"prop-field",style:{width:"100px"}},Ce={key:0,class:"footer flex"},Ie={class:"items-count"},$e={style:{"margin-right":"15px"}},Be=V({__name:"FolderItemsList",props:{itemsList:{type:Array,required:!0},isFocused:Boolean,canRename:Boolean,keyEventsActive:{type:Boolean,default:!0},canChangeViewType:{type:Boolean,default:!0},showProperties:{type:Boolean,default:!1},height:{type:Number}},emits:["onDoubleClick","onRightClick","renameFileHandler","onItemMouseDown","onSelectedItemsChange"],setup(t,{emit:k}){const o=t,v=k,x=te(),y=K(),d=m("list"),i=m([]),c=m(!1),f=m(""),P=m(null),j=m(null),G=m(200),D=m([]),Q=C(()=>y.timeFormat),Y=C(()=>y.dateFormat);se(()=>i.value,async function(){v("onSelectedItemsChange",i.value)});const b=()=>{console.log("Drag start")},N=async()=>{const a=[];for(const s of o.itemsList){const e=o.showProperties?await re.getStat(s):void 0;a.push({path:s,properties:e})}D.value=a};ae(async()=>{o.itemsList&&await N()});const Z=a=>!!x.filePathsToCut.includes(a),J=async a=>{if(v("onItemMouseDown",a),i.value.includes(a)&&i.value.length===1){!c.value&&o.canRename&&(f.value=_(a),setTimeout(async()=>{c.value=!c.value},600));return}i.value=[a],c.value=!1},O=async a=>{c.value||v("onDoubleClick",a)},X=(a,s)=>{v("onRightClick",{event:a,filePath:s})},S=a=>{v("renameFileHandler",{newName:ce(a)+"/"+f.value,oldName:a})},ee=()=>{i.value=[],c.value=!1},M=a=>{if(o.isFocused&&i.value.length>0&&o.itemsList&&o.keyEventsActive){if(a.code==="ArrowDown"){const s=o.itemsList.findIndex(e=>e===i.value[i.value.length-1]);s!==-1&&o.itemsList.length>s+1&&(i.value=[o.itemsList[s+1]])}else if(a.code==="ArrowUp"){const s=o.itemsList.findIndex(e=>e===i.value[i.value.length-1]);s>0&&(i.value=[o.itemsList[s-1]])}}};return ie(async()=>{o.keyEventsActive&&window.addEventListener("keydown",M),await N()}),ne(()=>{window.removeEventListener("keydown",M)}),(a,s)=>(l(),r(I,null,[n("div",{style:$(t.height?`height:${t.height}px`:""),class:p(["container",{"grid-container":d.value==="preview"}]),onMousedown:ee},[n("span",{class:"input-placeholder",ref_key:"fileNameToChangeSpanRef",ref:j},h(g(_)(f.value)),513),d.value==="list"&&t.showProperties?(l(),r("div",de,fe)):w("",!0),(l(!0),r(I,null,z(D.value,e=>(l(),r("div",{class:p({"cut-item":Z(e.path)}),draggable:"true",key:`item-${e.path}`,onDblclick:u=>O(e.path),onDragstart:b,onMousedown:T(u=>J(e.path),["stop"]),onContextmenu:T(u=>X(u,e.path),["right"])},[d.value==="preview"?(l(),r("div",{key:0,draggable:"true",onDragstart:b},[R(E,{selected:i.value.includes(e.path),height:60,filePath:e.path},null,8,["selected","filePath"]),n("div",{class:p([i.value.includes(e.path)?"file-text-preview-selected":"","file-text-preview"])},[i.value.includes(e.path)&&c.value&&t.canRename?H((l(),r("textarea",{key:0,ref_for:!0,ref_key:"fileNameInputRef",ref:P,onKeyup:F(u=>S(e.path),["enter"]),onBlur:u=>S(e.path),rows:"2",class:"no-outline file-text-preview","onUpdate:modelValue":s[0]||(s[0]=u=>f.value=u)},null,40,ye)),[[A,f.value]]):(l(),r("div",ge,h(g(_)(e.path)),1))],2)],32)):w("",!0),d.value==="list"?(l(),r("div",{key:1,class:p(["flex-align-center list-folder-item",{"selected-item":i.value.includes(e.path)}]),draggable:"true"},[n("div",we,[R(E,{class:"file-icon",noStyle:!0,height:18,filePath:e.path},null,8,["filePath"]),i.value.includes(e.path)&&c.value&&t.canRename?(l(),r("span",ke,[H(n("input",{ref_for:!0,ref_key:"fileNameInputRef",ref:P,class:"file-text no-outline","onUpdate:modelValue":s[1]||(s[1]=u=>f.value=u),onKeyup:[F(u=>S(e.path),["enter"]),s[2]||(s[2]=F(u=>c.value=!1,["esc"]))],onBlur:u=>S(e.path),type:"text",style:$(`width:${G.value}px`)},null,44,xe),[[A,f.value]])])):(l(),r("div",_e,h(g(_)(e.path)),1))]),t.showProperties&&e.properties?(l(),r("div",Se,h(g(oe)(e.properties.ctime,Y.value))+" "+h(g(le)(e.properties.ctime,Q.value)),1)):w("",!0),t.showProperties&&e.properties?(l(),r("div",Fe,h(g(ue)(e.properties.size)),1)):w("",!0)],2)):w("",!0)],42,me))),128))],38),t.canChangeViewType?(l(),r("div",Ce,[n("div",Ie,h(t.itemsList.length)+" item"+h(t.itemsList.length>1?"s":""),1),n("div",$e,[n("span",{class:p(["mdi mdi-format-list-bulleted preview-icon",{"preview-icon-selected":d.value==="list"}]),onClick:s[3]||(s[3]=e=>d.value="list")},null,2),n("span",{class:p(["mdi mdi-card-outline preview-icon",{"preview-icon-selected":d.value==="preview"}]),onClick:s[4]||(s[4]=e=>d.value="preview")},null,2)])])):w("",!0)],64))}}),Re=q(Be,[["__scopeId","data-v-3595e3bc"]]),L=t=>(U("data-v-3c9b7422"),t=t(),W(),t),Le=L(()=>n("div",{class:"title-text"},"Favourites",-1)),Pe=["onClick"],De={class:"medium-font"},be=L(()=>n("div",{class:"title-text"},"Cloud",-1)),Ne=L(()=>n("div",{class:"favourite-item"},[n("span",{class:p("mdi mdi-cloud mdi-18 favourite-icon")}),n("span",{class:"medium-font"},"Share folder ")],-1)),Me=V({__name:"FavouritesPanel",props:{pathSelected:{type:String,default:""},height:{type:Number,required:!1}},emits:["onFavouriteSelect"],setup(t,{emit:k}){const o=k,v=K(),x=C(()=>v.favouritesPathListAndIcon),y=d=>{o("onFavouriteSelect",d)};return(d,i)=>x.value?(l(),r("div",{key:0,class:"left-panel",style:$(t.height?`height:${t.height-2}px`:"")},[Le,(l(!0),r(I,null,z(x.value,c=>(l(),r("div",{class:p(["favourite-item",t.pathSelected===c.path?"favourite-item-selected":""]),key:"favourite-"+c,onClick:f=>y(c.path)},[n("span",{class:p(`mdi ${c.mdiIcon}  favourite-icon`)},null,2),n("span",De,h(g(_)(c.path)),1)],10,Pe))),128)),be,Ne],4)):w("",!0)}}),Ee=q(Me,[["__scopeId","data-v-3c9b7422"]]);export{Re as F,Ee as a};
