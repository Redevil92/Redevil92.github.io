import{d as z,r as v,am as I,j as P,a8 as y,b as E,o as r,c as u,l,L as f,a,B as O,g as M,K as m,y as U,F as H,m as K,n as R,ac as x,J as L,ad as j,f as g,p as J,h as $,_ as q}from"./index-8lyaWh5H.js";import{a as G,F as Q}from"./FavouritesPanel-pBcxeB_N.js";const W=o=>(J("data-v-7dd8373f"),o=o(),$(),o),X={style:{color:"white"}},Y={class:"flex"},Z={class:"right-panel"},ee={class:"input-list"},te={key:0,class:"input"},se=W(()=>a("div",{class:"label"},"Save as:",-1)),ae={class:"input"},oe={class:"label"},le={class:"selected-folder flex"},ne=["src"],ce={class:"path-and-files-container"},ie={class:"buttons-container"},de=z({__name:"SelectedFolderDialog",props:{to:String,showSaveAsInput:{type:Boolean,default:!0},inputLabelText:{type:String,default:"Destination"},actionButtonText:{type:String,default:"Save"}},emits:["closeDialog","onFolderSelected"],setup(o,{emit:A}){const h=o,S=A,n=v(""),c=v([]),i=v(I),B=new URL("data:image/svg+xml,%3csvg%20id='Layer_1'%20enable-background='new%200%200%20512%20512'%20height='512'%20viewBox='0%200%20512%20512'%20width='512'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%3e%3cpath%20d='m471.6%2097h-229.8c-5.6%200-10.7-3.1-13.2-8.1l-11.3-22.3c-2.5-5-7.6-8.1-13.2-8.1h-163.7c-8.2%200-14.8%206.6-14.8%2014.8v365.4c0%208.2%206.6%2014.8%2014.8%2014.8h431.3c8.2%200%2014.8-6.6%2014.8-14.8v-326.9c-.1-8.2-6.7-14.8-14.9-14.8z'%20fill='%23f0b972'/%3e%3cpath%20d='m500.7%20139.9h-489.4c-5.1%200-9.3%204.2-9.3%209.3v294.9c0%205.1%204.2%209.3%209.3%209.3h489.4c5.1%200%209.3-4.2%209.3-9.3v-294.9c0-5.1-4.2-9.3-9.3-9.3z'%20fill='%23fbd984'/%3e%3cpath%20d='m46.6%20111.4h418.8v28.5h-418.8z'%20fill='%23eff3f5'/%3e%3cpath%20d='m37%20125.6h438.1v14.3h-438.1z'%20fill='%23fff'/%3e%3c/g%3e%3c/svg%3e",import.meta.url).href,D=P(()=>y(i.value)),_=async(e,t)=>{w(e,t),await g.isDir(e)?i.value=e:n.value=y(e)},T=e=>e.map(t=>t.path),b=(e,t)=>{if(t===-1)return[];const s=[...e];return e.length>t&&s.splice(t+1),s},w=async(e,t)=>{const s=b(c.value,t),p=await g.getFiles(e,!0),d=[];for(const F of p){const N=await g.isDir(F);d.push({path:F,isFolder:N})}const V={path:e,files:d};s.push(V),c.value=s},k=()=>{S("closeDialog")},C=()=>{if((h.showSaveAsInput&&n.value||!h.showSaveAsInput)&&i.value){let e=i.value;h.showSaveAsInput&&(e+="/"+n.value),S("onFolderSelected",e)}else console.log("Show error")};return E(async()=>{w(I,0)}),(e,t)=>(r(),u("div",X,[l(j,{to:o.to,noPadding:!0},{default:f(()=>[a("div",Y,[l(G,{pathSelected:c.value[0]?c.value[0].path:"",onOnFavouriteSelect:t[0]||(t[0]=s=>_(s,-1))},null,8,["pathSelected"]),a("div",Z,[a("div",null,[a("div",ee,[o.showSaveAsInput?(r(),u("div",te,[se,l(O,{placeholder:"Save as",modelValue:n.value,"onUpdate:modelValue":t[1]||(t[1]=s=>n.value=s)},null,8,["modelValue"])])):M("",!0),a("div",ae,[a("div",oe,m(o.inputLabelText)+":",1),a("div",le,[a("img",{height:"18",src:U(B),alt:""},null,8,ne),a("p",null,m(D.value),1)])])]),a("div",ce,[(r(!0),u(H,null,K(c.value,(s,p)=>(r(),u("div",{key:"path-files-"+s.path,class:"path-item",style:R(` height: ${o.showSaveAsInput?400:450}px;`)},[l(Q,{itemsList:T(s.files),canRename:!1,isFocused:!0,canChangeViewType:!1,keyEventsActive:!1,onOnItemMouseDown:d=>_(d,p)},null,8,["itemsList","onOnItemMouseDown"])],4))),128))])]),a("div",ie,[l(x,{neutralColor:"",onClick:k},{default:f(()=>[L("Cancel")]),_:1}),l(x,{class:"save-button",onClick:C},{default:f(()=>[L(m(o.actionButtonText),1)]),_:1})])])])]),_:1},8,["to"])]))}}),he=q(de,[["__scopeId","data-v-7dd8373f"]]);export{he as S};
