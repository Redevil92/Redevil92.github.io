"use strict";(self["webpackChunkmy_portfolio"]=self["webpackChunkmy_portfolio"]||[]).push([[1568],{1568:function(e,t,i){i.r(t),i.d(t,{default:function(){return C}});var l=i(3396),a=i(9242),o=i(7139);const n=["id"],s={class:"folder-actions"},u=["onClick"],d=["onDblclick","onMousedown","onContextmenu"],c={key:0},r={key:1,class:"file-text noselect"};function m(e,t,i,m,g,h){const f=(0,l.up)("FileIcon"),p=(0,l.up)("DropExternalFileZone");return(0,l.wg)(),(0,l.iD)("div",{onContextmenu:t[9]||(t[9]=(0,a.iM)((t=>e.openActionMenu(t,!0)),["right"])),class:"droppable",id:e.itemDialog.path},[(0,l._)("div",{class:"folder-item-container",onMousedown:t[8]||(t[8]=(...t)=>e.deselectItem&&e.deselectItem(...t)),style:(0,o.j5)(`height:${e.height-5}px`)},[(0,l._)("div",s,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.filePathSplitted,((t,i)=>((0,l.wg)(),(0,l.iD)("span",{key:"path-"+i+"-"+t},[(0,l._)("span",{class:"path-item",onClick:t=>e.updateItemDialogPath(e.buildPath(e.filePathSplitted,i))},(0,o.zw)(t),9,u),(0,l.Uk)((0,o.zw)(e.filePathSplitted.length>i+1?" > ":""),1)])))),128))]),(0,l.Wm)(p,{dropPath:e.itemDialog.path},{default:(0,l.w5)((()=>[(0,l._)("div",{onMouseover:t[5]||(t[5]=t=>e.isMouseOver=!0),onMouseleave:t[6]||(t[6]=t=>e.isMouseOver=!1),onDrop:t[7]||(t[7]=(...t)=>e.dropFilehandler&&e.dropFilehandler(...t)),class:(0,o.C_)(["folder-item-list",{"folder-item-list-drag-over":e.isDraggingItem&&e.isMouseOver}]),style:(0,o.j5)(`height:${e.height-35}px`),ref:"folderContentRef"},[(0,l._)("span",{class:"input-placeholder",ref:"fileNameToChangeSpanRef"},(0,o.zw)(e.getFileNameFromPath(e.fileNameToChange)),513),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.itemDialog.filesPath,((i,n)=>((0,l.wg)(),(0,l.iD)("div",{id:"drop_zone",class:(0,o.C_)(["folder-item",{"folder-item-even":n%2===1,"selected-item":i===e.selectedItem,"cut-item":e.isCutFile(i)}]),key:`item-${n}-${i}`,onDblclick:t=>e.doubleClickHandler(i),onMousedown:(0,a.iM)((t=>e.itemClickHandler(i)),["stop"]),onContextmenu:(0,a.iM)((t=>e.openActionMenu(t,!1,i)),["right"])},[(0,l._)("div",{class:"flex-align-center",draggable:"true",onDragstart:t[4]||(t[4]=t=>e.setFilesToMove([e.selectedItem]))},[(0,l.Wm)(f,{noStyle:!0,height:16,filePath:i},null,8,["filePath"]),(0,l._)("div",null,[i===e.selectedItem&&e.isEditingSelectedValue?((0,l.wg)(),(0,l.iD)("span",c,[(0,l.wy)((0,l._)("input",{ref_for:!0,ref:"fileNameInputRef",class:"file-text no-outline","onUpdate:modelValue":t[0]||(t[0]=t=>e.fileNameToChange=t),onKeyup:[t[1]||(t[1]=(0,a.D2)(((...t)=>e.changeFileName&&e.changeFileName(...t)),["enter"])),t[3]||(t[3]=(0,a.D2)((t=>e.isEditingSelectedValue=!1),["esc"]))],onBlur:t[2]||(t[2]=(...t)=>e.changeFileName&&e.changeFileName(...t)),type:"text",style:(0,o.j5)(`width:${e.fileFocusedWidth}px`)},null,36),[[a.nr,e.fileNameToChange]])])):((0,l.wg)(),(0,l.iD)("span",r,(0,o.zw)(e.getFileNameFromPath(i)),1))])],32)],42,d)))),128))],38)])),_:1},8,["dropPath"])],36)],40,n)}var g=i(7103),h=i(4870),f=i(7401),p=i(4273),v=i(8097),D=i(8417),w=i(7695),F=(0,l.aZ)({props:{itemDialog:Object,height:Number},components:{DropExternalFileZone:p.Z,FileIcon:v.Z},emits:[],setup(e,t){const i=(0,w.H)(),a=(0,h.iH)(null),o=(0,h.iH)(!1),{moveFilesInFolder:n,setFilesToMove:s}=(0,D.Z)(),u=(0,l.Fl)((function(){return""!==i.dragginPath})),d=async e=>{const t=await(0,g.zj)(e);if(t&&!v.value)m(e);else{const t={path:e,coordinates:{x:0,y:0},isSelected:!0};i.createItemDialog(t)}},c=(t,l=!1,a)=>{t.preventDefault(),t.stopPropagation();const o=t;i.setActionMenu({show:!0,paths:a?[a]:[e.itemDialog?.path],position:{x:o.clientX,y:o.clientY},isOpenedFolder:l})},r=async t=>{n(t,e.itemDialog?.path||"")},m=t=>{i.updateItemDialogName({newPath:t,itemDialog:e.itemDialog})},p=(0,h.iH)(""),v=(0,h.iH)(!1),F=(0,h.iH)(""),y=(0,h.iH)(null),P=(0,h.iH)(null),C=(0,h.iH)(200),I=e=>{const t=i.filePathsToCut;return!!t.includes(e)};(0,l.YP)(F,(async function(t,i){await(0,l.Y3)(),P.value||(C.value=300),C.value=Math.min(P.value.getBoundingClientRect().width,e.itemDialog?e.itemDialog?.dimension.width-30:200)}));const k=async t=>{e.itemDialog?.isFocused||i.setFocusedItemDialog(e.itemDialog),t!==p.value?(p.value=t,v.value=!1):v.value||(F.value=(0,f.Bc)(t),setTimeout((async()=>{v.value=!v.value,await N()}),600))},M=()=>{p.value="",v.value=!1},N=async()=>{setTimeout((async()=>{y.value&&console.log("INPUT REF",y.value)}),2e3)},x=()=>{const t=e.itemDialog?.path+"/"+F.value;i.renameFile(t,p.value),_()},_=()=>{i.refreshAllItemDialogFiles(),i.fetchDesktopItems()},H=(0,l.Fl)((function(){return e.itemDialog?.path.split("/")})),b=(e,t)=>{let i="";for(let l=0;l<=t;l++)0!==l&&(i+="/"),i+=e[l];return i},T=t=>{if(e.itemDialog?.isFocused&&p.value)if("Delete"===t.code&&e.itemDialog?.isFocused&&p.value)i.deleteFileSystemItem(p.value),_();else if("ArrowDown"===t.code){const t=e.itemDialog.filesPath.findIndex((e=>e===p.value));-1!==t&&e.itemDialog.filesPath.length>t+1&&(p.value=e.itemDialog.filesPath[t+1])}else if("ArrowUp"===t.code){const t=e.itemDialog.filesPath.findIndex((e=>e===p.value));t>0&&(p.value=e.itemDialog.filesPath[t-1])}},S=e=>{if(u.value){const t=a.value?.getBoundingClientRect();t&&e.clientX<t.x+t.width&&e.clientX>t.x&&e.clientY<t.y+t.height&&e.clientY>t.y?o.value=!0:o.value=!1}};return(0,l.bv)((()=>{window.addEventListener("mousemove",S),window.addEventListener("keydown",T)})),(0,l.se)((()=>{window.removeEventListener("keydown",T),window.removeEventListener("mousemove",S)})),{folderContentRef:a,getFileNameFromPath:f.Bc,doubleClickHandler:d,isDir:g.zj,getFileExtensionFromName:f.vj,filePathSplitted:H,updateItemDialogPath:m,buildPath:b,selectedItem:p,itemClickHandler:k,isEditingSelectedValue:v,fileNameToChange:F,deselectItem:M,fileNameInputRef:y,changeFileName:x,fileNameToChangeSpanRef:P,fileFocusedWidth:C,openActionMenu:c,isCutFile:I,dropFilehandler:r,setFilesToMove:s,isDraggingItem:u,isMouseOver:o}}}),y=i(89);const P=(0,y.Z)(F,[["render",m],["__scopeId","data-v-10c8bcfa"]]);var C=P}}]);
//# sourceMappingURL=1568.511fc573.js.map