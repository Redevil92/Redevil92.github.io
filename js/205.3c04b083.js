"use strict";(self["webpackChunkmy_portfolio"]=self["webpackChunkmy_portfolio"]||[]).push([[205],{50205:function(e,t,l){l.r(t),l.d(t,{default:function(){return I}});l(44114);var a=l(56768),i=l(24232),s=l(90144),n=l(45130),o=l(92759),u=l(4983),r=l(28723),p=l(55564);const c=(e,t=2)=>{if(!+e)return"0 Bytes";const l=1024,a=t<0?0:t,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(e)/Math.log(l));return`${parseFloat((e/Math.pow(l,s)).toFixed(a))} ${i[s]}`};var v=l(6910),d=l(26014);const h=e=>((0,a.Qi)("data-v-d84fbee0"),e=e(),(0,a.jt)(),e),f={key:0,class:"flex-align-center table-header"},m=h((()=>(0,a.Lk)("div",{style:{width:"400px"}},"Name",-1))),y=h((()=>(0,a.Lk)("div",{style:{width:"170px"}},"Date modified",-1))),w=h((()=>(0,a.Lk)("div",{style:{width:"100px"}},"Size",-1))),k=[m,y,w],g=["onDblclick","onMousedown","onContextmenu"],C=["onKeyup","onBlur"],x={key:1,class:"file-text-preview"},L={class:"flex",style:{width:"400px"}},R={key:0},E=["onKeyup","onBlur"],B={key:1,style:{width:"290px"},class:"file-text one-line-ellipsis noselect"},b={key:0,class:"prop-field",style:{width:"170px"}},_={key:1,class:"prop-field",style:{width:"100px"}},K={key:0,class:"footer flex"},A={class:"items-count"},X={style:{"margin-right":"15px"}};var D=(0,a.pM)({__name:"FolderItemsList",props:{itemsList:{type:Array,required:!0},isFocused:Boolean,canRename:Boolean,keyEventsActive:{type:Boolean,default:!0},canChangeViewType:{type:Boolean,default:!0},showProperties:{type:Boolean,default:!1},height:{type:Number}},emits:["onDoubleClick","onRightClick","renameFileHandler","onItemMouseDown","onSelectedItemsChange"],setup(e,{emit:t}){const l=e,h=t,m=(0,r.g)(),y=(0,d.C)(),w=(0,s.KR)("list"),D=(0,s.KR)([]),F=(0,s.KR)(!1),P=(0,s.KR)(""),I=(0,s.KR)(null),M=(0,s.KR)(null),T=(0,s.KR)(200),Q=(0,s.KR)([]),N=(0,a.EW)((()=>y.timeFormat)),$=(0,a.EW)((()=>y.dateFormat));(0,a.wB)((()=>D.value),(async function(){h("onSelectedItemsChange",D.value)}));const S=()=>{console.log("Drag start")},V=async()=>{const e=[];for(const t of l.itemsList){const a=l.showProperties?await p.A.getStat(t):void 0;e.push({path:t,properties:a})}Q.value=e};(0,a.nT)((async()=>{l.itemsList&&await V()}));const j=e=>{const t=m.filePathsToCut;return!!t.includes(e)},U=async e=>{h("onItemMouseDown",e),D.value.includes(e)&&1===D.value.length?!F.value&&l.canRename&&(P.value=(0,o.lA)(e),setTimeout((async()=>{F.value=!F.value}),600)):(D.value=[e],F.value=!1)},z=async e=>{F.value||h("onDoubleClick",e)},H=(e,t)=>{h("onRightClick",{event:e,filePath:t})},J=e=>{h("renameFileHandler",{newName:(0,o.Qv)(e)+"/"+P.value,oldName:e})},W=()=>{D.value=[],F.value=!1},q=e=>{if(l.isFocused&&D.value.length>0&&l.itemsList&&l.keyEventsActive)if("ArrowDown"===e.code){const e=l.itemsList.findIndex((e=>e===D.value[D.value.length-1]));-1!==e&&l.itemsList.length>e+1&&(D.value=[l.itemsList[e+1]])}else if("ArrowUp"===e.code){const e=l.itemsList.findIndex((e=>e===D.value[D.value.length-1]));e>0&&(D.value=[l.itemsList[e-1]])}};return(0,a.sV)((async()=>{l.keyEventsActive&&window.addEventListener("keydown",q),await V()})),(0,a.hi)((()=>{window.removeEventListener("keydown",q)})),(t,l)=>((0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{style:(0,i.Tr)(e.height?`height:${e.height}px`:""),class:(0,i.C4)(["container",{"grid-container":"preview"===w.value}]),onMousedown:W},[(0,a.Lk)("span",{class:"input-placeholder",ref_key:"fileNameToChangeSpanRef",ref:M},(0,i.v_)((0,s.R1)(o.lA)(P.value)),513),"list"===w.value&&e.showProperties?((0,a.uX)(),(0,a.CE)("div",f,k)):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(Q.value,(t=>((0,a.uX)(),(0,a.CE)("div",{class:(0,i.C4)({"cut-item":j(t.path)}),draggable:"true",key:`item-${t.path}`,onDblclick:e=>z(t.path),onDragstart:S,onMousedown:(0,n.D$)((e=>U(t.path)),["stop"]),onContextmenu:(0,n.D$)((e=>H(e,t.path)),["right"])},["preview"===w.value?((0,a.uX)(),(0,a.CE)("div",{key:0,draggable:"true",onDragstart:S},[(0,a.bF)(u.A,{selected:D.value.includes(t.path),height:60,filePath:t.path},null,8,["selected","filePath"]),(0,a.Lk)("div",{class:(0,i.C4)([D.value.includes(t.path)?"file-text-preview-selected":"","file-text-preview"])},[D.value.includes(t.path)&&F.value&&e.canRename?(0,a.bo)(((0,a.uX)(),(0,a.CE)("textarea",{key:0,ref_for:!0,ref_key:"fileNameInputRef",ref:I,onKeyup:(0,n.jR)((e=>J(t.path)),["enter"]),onBlur:e=>J(t.path),rows:"2",class:"no-outline file-text-preview","onUpdate:modelValue":l[0]||(l[0]=e=>P.value=e)},null,40,C)),[[n.Jo,P.value]]):((0,a.uX)(),(0,a.CE)("div",x,(0,i.v_)((0,s.R1)(o.lA)(t.path)),1))],2)],32)):(0,a.Q3)("",!0),"list"===w.value?((0,a.uX)(),(0,a.CE)("div",{key:1,class:(0,i.C4)(["flex-align-center list-folder-item",{"selected-item":D.value.includes(t.path)}]),draggable:"true"},[(0,a.Lk)("div",L,[(0,a.bF)(u.A,{class:"file-icon",noStyle:!0,height:18,filePath:t.path},null,8,["filePath"]),D.value.includes(t.path)&&F.value&&e.canRename?((0,a.uX)(),(0,a.CE)("span",R,[(0,a.bo)((0,a.Lk)("input",{ref_for:!0,ref_key:"fileNameInputRef",ref:I,class:"file-text no-outline","onUpdate:modelValue":l[1]||(l[1]=e=>P.value=e),onKeyup:[(0,n.jR)((e=>J(t.path)),["enter"]),l[2]||(l[2]=(0,n.jR)((e=>F.value=!1),["esc"]))],onBlur:e=>J(t.path),type:"text",style:(0,i.Tr)(`width:${T.value}px`)},null,44,E),[[n.Jo,P.value]])])):((0,a.uX)(),(0,a.CE)("div",B,(0,i.v_)((0,s.R1)(o.lA)(t.path)),1))]),e.showProperties&&t.properties?((0,a.uX)(),(0,a.CE)("div",b,(0,i.v_)((0,s.R1)(v.Xc)(t.properties.ctime,$.value))+" "+(0,i.v_)((0,s.R1)(v.ub)(t.properties.ctime,N.value)),1)):(0,a.Q3)("",!0),e.showProperties&&t.properties?((0,a.uX)(),(0,a.CE)("div",_,(0,i.v_)((0,s.R1)(c)(t.properties.size)),1)):(0,a.Q3)("",!0)],2)):(0,a.Q3)("",!0)],42,g)))),128))],38),e.canChangeViewType?((0,a.uX)(),(0,a.CE)("div",K,[(0,a.Lk)("div",A,(0,i.v_)(e.itemsList.length)+" item"+(0,i.v_)(e.itemsList.length>1?"s":""),1),(0,a.Lk)("div",X,[(0,a.Lk)("span",{class:(0,i.C4)(["mdi mdi-format-list-bulleted preview-icon",{"preview-icon-selected":"list"===w.value}]),onClick:l[3]||(l[3]=e=>w.value="list")},null,2),(0,a.Lk)("span",{class:(0,i.C4)(["mdi mdi-card-outline preview-icon",{"preview-icon-selected":"preview"===w.value}]),onClick:l[4]||(l[4]=e=>w.value="preview")},null,2)])])):(0,a.Q3)("",!0)],64))}}),F=l(71241);const P=(0,F.A)(D,[["__scopeId","data-v-d84fbee0"]]);var I=P}}]);
//# sourceMappingURL=205.3c04b083.js.map