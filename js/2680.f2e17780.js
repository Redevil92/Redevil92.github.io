"use strict";(self["webpackChunkmy_portfolio"]=self["webpackChunkmy_portfolio"]||[]).push([[2680],{2680:function(e,t,o){o.r(t),o.d(t,{default:function(){return s}});var a=o(3396);const n={id:"canvas-audio",ref:"canvasRef",class:"audio-canvas"};function l(e,t,o,l,i,u){return(0,a.wg)(),(0,a.iD)("canvas",n,null,512)}o(3462);var i=o(4870),u=(0,a.aZ)({props:{audioElement:Object},components:{},emits:[],setup(e,t){const o=(0,i.iH)(),n=(0,i.iH)(null),l=(0,i.iH)(new window.AudioContext);function u(){if(o.value&&n.value){const e=n.value.frequencyBinCount,t=new Uint8Array(e),a=o.value.getContext("2d");a?.clearRect(0,0,o.value.width,o.value.height),n.value?.getByteFrequencyData(t),c(e,t,a,o.value)}requestAnimationFrame(u)}const c=(e,t,o,a)=>{const n=getComputedStyle(document.body);let l;o.fillStyle=n.getPropertyValue("--font-color");const i=a.width/2/e;let u=0,c=e*i;o.clearRect(0,0,a.width,a.height),r();const v=255;for(let r=0;r<e;r++)l=t[r]/v*a.height,s(o,a.width/2-u,(a.height-l)/2,i/1.7,l,30),s(o,c,(a.height-l)/2,i/1.7,l,30),u+=i,c+=i},r=()=>{const e=window.devicePixelRatio;if(o.value){const t=+getComputedStyle(o.value).getPropertyValue("height").slice(0,-2),a=+getComputedStyle(o.value).getPropertyValue("width").slice(0,-2);o.value.setAttribute("height",(t*e).toString()),o.value.setAttribute("width",(a*e).toString())}},s=function(e,t,o,a,n,l){a<2*l&&(l=a/2),n<2*l&&(l=n/2);const i=getComputedStyle(document.body).getPropertyValue("--font-color");e.fillStyle=i,e.beginPath(),e.moveTo(t+l,o),e.arcTo(t+a,o,t+a,o+n,l),e.arcTo(t+a,o+n,t,o+n,l),e.arcTo(t,o+n,t,o,l),e.arcTo(t,o,t+a,o,l),e.closePath(),e.fill()},v=()=>{if(e.audioElement&&o.value){const t=l.value.createMediaElementSource(e.audioElement);n.value=l.value.createAnalyser(),t.connect(n.value),n.value.connect(l.value.destination),n.value.smoothingTimeConstant=.9,n.value.fftSize=32,u()}};return(0,a.bv)((async()=>{v()})),{canvasRef:o}}}),c=o(89);const r=(0,c.Z)(u,[["render",l],["__scopeId","data-v-31ee0a72"]]);var s=r}}]);
//# sourceMappingURL=2680.f2e17780.js.map