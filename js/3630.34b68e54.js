"use strict";(self["webpackChunkmy_portfolio"]=self["webpackChunkmy_portfolio"]||[]).push([[3630],{83630:function(e,t,i){i.r(t),i.d(t,{default:function(){return R}});var l=i(73396),a=i(87139),n=i(44870),s=i(49242),o=i(67250),r=i(69754),u=i(67695),c=i(59025);const p=(e,t=2)=>{if(!+e)return"0 Bytes";const i=1024,l=t<0?0:t,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],n=Math.floor(Math.log(e)/Math.log(i));return`${parseFloat((e/Math.pow(i,n)).toFixed(l))} ${a[n]}`};var d=i(55280),v=i(95636);const h=e=>((0,l.dD)("data-v-5f452fde"),e=e(),(0,l.Cn)(),e),w={key:0,class:"flex-align-center table-header"},f=h((()=>(0,l._)("div",{style:{width:"400px"}},"Name",-1))),m=h((()=>(0,l._)("div",{style:{width:"170px"}},"Date modified",-1))),y=h((()=>(0,l._)("div",{style:{width:"100px"}},"Size",-1))),g=[f,m,y],k=["onDblclick","onMousedown","onContextmenu"],_=["onKeyup","onBlur"],x={key:1,class:"file-text-preview"},D={class:"flex",style:{width:"400px"}},B={key:0},C=["onKeyup","onBlur"],b={key:1,style:{width:"290px"},class:"file-text one-line-ellipsis noselect"},L={key:0,class:"prop-field",style:{width:"170px"}},H={key:1,class:"prop-field",style:{width:"100px"}},P={key:0,class:"footer flex"},F={class:"items-count"},M={style:{"margin-right":"15px"}};var S=(0,l.aZ)({__name:"FolderItemsList",props:{itemsList:{type:Array,required:!0},isFocused:Boolean,canRename:Boolean,keyEventsActive:{type:Boolean,default:!0},canChangeViewType:{type:Boolean,default:!0},showProperties:{type:Boolean,default:!1},height:{type:Number}},emits:["onDoubleClick","onRightClick","renameFileHandler","onItemMouseDown","onSelectedItemsChange"],setup(e,{emit:t}){const i=e,h=t,f=(0,u.H)(),m=(0,v.F)(),y=(0,n.iH)("list"),S=(0,n.iH)([]),z=(0,n.iH)(!1),I=(0,n.iH)(""),R=(0,n.iH)(null),U=(0,n.iH)(null),A=(0,n.iH)(200),q=(0,n.iH)([]),N=(0,l.Fl)((()=>m.timeFormat)),E=(0,l.Fl)((()=>m.dateFormat));(0,l.YP)((()=>S.value),(async function(){h("onSelectedItemsChange",S.value)}));const K=()=>{console.log("Drag start")},T=async()=>{const e=[];for(const t of i.itemsList){const l=i.showProperties?await c.Z.getStat(t):void 0;e.push({path:t,properties:l})}q.value=e};(0,l.m0)((async()=>{i.itemsList&&await T()}));const Z=e=>{const t=f.filePathsToCut;return!!t.includes(e)},$=async e=>{h("onItemMouseDown",e),S.value.includes(e)&&1===S.value.length?!z.value&&i.canRename&&(I.value=(0,o.Bc)(e),setTimeout((async()=>{z.value=!z.value}),600)):(S.value=[e],z.value=!1)},V=async e=>{z.value||h("onDoubleClick",e)},Y=(e,t)=>{h("onRightClick",{event:e,filePath:t})},j=e=>{h("renameFileHandler",{newName:(0,o.bn)(e)+"/"+I.value,oldName:e})},W=()=>{S.value=[],z.value=!1},G=e=>{if(i.isFocused&&S.value.length>0&&i.itemsList&&i.keyEventsActive)if("ArrowDown"===e.code){const e=i.itemsList.findIndex((e=>e===S.value[S.value.length-1]));-1!==e&&i.itemsList.length>e+1&&(S.value=[i.itemsList[e+1]])}else if("ArrowUp"===e.code){const e=i.itemsList.findIndex((e=>e===S.value[S.value.length-1]));e>0&&(S.value=[i.itemsList[e-1]])}};return(0,l.bv)((async()=>{i.keyEventsActive&&window.addEventListener("keydown",G),await T()})),(0,l.Ah)((()=>{window.removeEventListener("keydown",G)})),(t,i)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",{style:(0,a.j5)(e.height?`height:${e.height}px`:""),class:(0,a.C_)(["container",{"grid-container":"preview"===y.value}]),onMousedown:W},[(0,l._)("span",{class:"input-placeholder",ref_key:"fileNameToChangeSpanRef",ref:U},(0,a.zw)((0,n.SU)(o.Bc)(I.value)),513),"list"===y.value&&e.showProperties?((0,l.wg)(),(0,l.iD)("div",w,g)):(0,l.kq)("",!0),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(q.value,(t=>((0,l.wg)(),(0,l.iD)("div",{class:(0,a.C_)({"cut-item":Z(t.path)}),draggable:"true",key:`item-${t.path}`,onDblclick:e=>V(t.path),onDragstart:K,onMousedown:(0,s.iM)((e=>$(t.path)),["stop"]),onContextmenu:(0,s.iM)((e=>Y(e,t.path)),["right"])},["preview"===y.value?((0,l.wg)(),(0,l.iD)("div",{key:0,draggable:"true",onDragstart:K},[(0,l.Wm)(r.Z,{selected:S.value.includes(t.path),height:60,filePath:t.path},null,8,["selected","filePath"]),(0,l._)("div",{class:(0,a.C_)([S.value.includes(t.path)?"file-text-preview-selected":"","file-text-preview"])},[S.value.includes(t.path)&&z.value&&e.canRename?(0,l.wy)(((0,l.wg)(),(0,l.iD)("textarea",{key:0,ref_for:!0,ref_key:"fileNameInputRef",ref:R,onKeyup:(0,s.D2)((e=>j(t.path)),["enter"]),onBlur:e=>j(t.path),rows:"2",class:"no-outline file-text-preview","onUpdate:modelValue":i[0]||(i[0]=e=>I.value=e)},null,40,_)),[[s.nr,I.value]]):((0,l.wg)(),(0,l.iD)("div",x,(0,a.zw)((0,n.SU)(o.Bc)(t.path)),1))],2)],32)):(0,l.kq)("",!0),"list"===y.value?((0,l.wg)(),(0,l.iD)("div",{key:1,class:(0,a.C_)(["flex-align-center list-folder-item",{"selected-item":S.value.includes(t.path)}]),draggable:"true"},[(0,l._)("div",D,[(0,l.Wm)(r.Z,{class:"file-icon",noStyle:!0,height:18,filePath:t.path},null,8,["filePath"]),S.value.includes(t.path)&&z.value&&e.canRename?((0,l.wg)(),(0,l.iD)("span",B,[(0,l.wy)((0,l._)("input",{ref_for:!0,ref_key:"fileNameInputRef",ref:R,class:"file-text no-outline","onUpdate:modelValue":i[1]||(i[1]=e=>I.value=e),onKeyup:[(0,s.D2)((e=>j(t.path)),["enter"]),i[2]||(i[2]=(0,s.D2)((e=>z.value=!1),["esc"]))],onBlur:e=>j(t.path),type:"text",style:(0,a.j5)(`width:${A.value}px`)},null,44,C),[[s.nr,I.value]])])):((0,l.wg)(),(0,l.iD)("div",b,(0,a.zw)((0,n.SU)(o.Bc)(t.path)),1))]),e.showProperties&&t.properties?((0,l.wg)(),(0,l.iD)("div",L,(0,a.zw)((0,n.SU)(d.Am)(t.properties.ctime,E.value))+" "+(0,a.zw)((0,n.SU)(d.rx)(t.properties.ctime,N.value)),1)):(0,l.kq)("",!0),e.showProperties&&t.properties?((0,l.wg)(),(0,l.iD)("div",H,(0,a.zw)((0,n.SU)(p)(t.properties.size)),1)):(0,l.kq)("",!0)],2)):(0,l.kq)("",!0)],42,k)))),128))],38),e.canChangeViewType?((0,l.wg)(),(0,l.iD)("div",P,[(0,l._)("div",F,(0,a.zw)(e.itemsList.length)+" item"+(0,a.zw)(e.itemsList.length>1?"s":""),1),(0,l._)("div",M,[(0,l._)("span",{class:(0,a.C_)(["mdi mdi-format-list-bulleted preview-icon",{"preview-icon-selected":"list"===y.value}]),onClick:i[3]||(i[3]=e=>y.value="list")},null,2),(0,l._)("span",{class:(0,a.C_)(["mdi mdi-card-outline preview-icon",{"preview-icon-selected":"preview"===y.value}]),onClick:i[4]||(i[4]=e=>y.value="preview")},null,2)])])):(0,l.kq)("",!0)],64))}}),z=i(40089);const I=(0,z.Z)(S,[["__scopeId","data-v-5f452fde"]]);var R=I}}]);
//# sourceMappingURL=3630.34b68e54.js.map