"use strict";(self["webpackChunkmy_portfolio"]=self["webpackChunkmy_portfolio"]||[]).push([[4643,2680],{2680:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var o=a(3396);const i={id:"canvas-audio",ref:"canvasRef",class:"audio-canvas"};function n(e,t,a,n,u,l){return(0,o.wg)(),(0,o.iD)("canvas",i,null,512)}a(3462);var u=a(4870),l=(0,o.aZ)({props:{audioElement:Object},components:{},emits:[],setup(e,t){const a=(0,u.iH)(),i=(0,u.iH)(null),n=(0,u.iH)(new window.AudioContext);function l(){if(a.value&&i.value){const e=i.value.frequencyBinCount,t=new Uint8Array(e),o=a.value.getContext("2d");o?.clearRect(0,0,a.value.width,a.value.height),i.value?.getByteFrequencyData(t),c(e,t,o,a.value)}requestAnimationFrame(l)}const c=(e,t,a,o)=>{const i=getComputedStyle(document.body);let n;a.fillStyle=i.getPropertyValue("--font-color");const u=o.width/2/e;let l=0,c=e*u;a.clearRect(0,0,o.width,o.height),r();const s=255;for(let r=0;r<e;r++)n=t[r]/s*o.height,d(a,o.width/2-l,(o.height-n)/2,u/1.7,n,30),d(a,c,(o.height-n)/2,u/1.7,n,30),l+=u,c+=u},r=()=>{const e=window.devicePixelRatio;if(a.value){const t=+getComputedStyle(a.value).getPropertyValue("height").slice(0,-2),o=+getComputedStyle(a.value).getPropertyValue("width").slice(0,-2);a.value.setAttribute("height",(t*e).toString()),a.value.setAttribute("width",(o*e).toString())}},d=function(e,t,a,o,i,n){o<2*n&&(n=o/2),i<2*n&&(n=i/2);const u=getComputedStyle(document.body).getPropertyValue("--font-color");e.fillStyle=u,e.beginPath(),e.moveTo(t+n,a),e.arcTo(t+o,a,t+o,a+i,n),e.arcTo(t+o,a+i,t,a+i,n),e.arcTo(t,a+i,t,a,n),e.arcTo(t,a,t+o,a,n),e.closePath(),e.fill()},s=()=>{if(e.audioElement&&a.value){const t=n.value.createMediaElementSource(e.audioElement);i.value=n.value.createAnalyser(),t.connect(i.value),i.value.connect(n.value.destination),i.value.smoothingTimeConstant=.9,i.value.fftSize=32,l()}};return(0,o.bv)((async()=>{s()})),{canvasRef:a}}}),c=a(89);const r=(0,c.Z)(l,[["render",n],["__scopeId","data-v-31ee0a72"]]);var d=r},4643:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var o=a(3396),i=a(7139);const n=e=>((0,o.dD)("data-v-4e8ea3b9"),e=e(),(0,o.Cn)(),e),u=n((()=>(0,o._)("div",{id:"waveform"},null,-1))),l=["src"];function c(e,t,a,n,c,r){const d=(0,o.up)("AudioAnalyzer");return(0,o.wg)(),(0,o.iD)("div",{style:(0,i.j5)([`height: ${e.height}px; width: calc(100% -4px); `,{position:"relative"}])},[u,(0,o._)("div",{style:(0,i.j5)(`height: ${e.height-80}px; padding: calc(var(--margin)*2) `)},[e.audioSource?((0,o.wg)(),(0,o.j4)(d,{key:0,audioElement:e.audioRef},null,8,["audioElement"])):(0,o.kq)("",!0)],4),(0,o._)("audio",{autoplay:"",class:"audio-controls",id:"audio",controls:"",ref:"audioRef",src:e.audioSource},null,8,l)],4)}var r=a(4870),d=a(7103),s=a(2680),v=a(5246),g=(0,o.aZ)({props:{itemDialog:Object,height:Number},components:{AudioAnalyzer:s["default"]},emits:[],setup(e,t){const a=(0,v.Z)(),i=(0,r.iH)(),n=(0,r.iH)();return(0,o.YP)((()=>e.itemDialog?.isCollapsed),(async function(t,o){if(t){const t={componentPath:"audioItem/AudioWidget.vue",itemDialogGuid:e.itemDialog?.guid||"",audioElement:i.value};a.addDynamicIslandItem(t)}else a.removeDynamicIslandItem(e.itemDialog?.guid||"")})),(0,o.bv)((async()=>{if(e.itemDialog?.path){const t=await(0,d.pJ)(e.itemDialog?.path);n.value=t}})),{audioSource:n,audioRef:i}}}),m=a(89);const h=(0,m.Z)(g,[["render",c],["__scopeId","data-v-4e8ea3b9"]]);var f=h}}]);
//# sourceMappingURL=4643.43f75555.js.map