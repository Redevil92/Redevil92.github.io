{"version":3,"file":"js/8058.899c5398.js","mappings":"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","sources":["webpack://my-portfolio/./node_modules/vue-loader/dist/index.js","webpack://my-portfolio/./src/components/apps/audioItem/AudioAnalyzer.vue","webpack://my-portfolio/./src/components/apps/audioItem/AudioPlayer.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport { onMounted, PropType, ref } from \"vue\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'AudioAnalyzer',\n  props: { audioElement: Object as PropType<HTMLAudioElement> },\n  setup(__props) {\n\r\nconst props = __props;\r\n\r\nconst canvasRef = ref<HTMLCanvasElement>();\r\n\r\nconst analyzer = ref<AnalyserNode | null>(null);\r\nconst audioCtx = ref(new window.AudioContext());\r\n\r\nfunction animate() {\r\n  if (canvasRef.value && analyzer.value) {\r\n    const bufferLength = analyzer.value.frequencyBinCount;\r\n    const dataArray = new Uint8Array(bufferLength);\r\n\r\n    const ctx = canvasRef.value.getContext(\"2d\") as CanvasRenderingContext2D;\r\n    ctx?.clearRect(0, 0, canvasRef.value.width, canvasRef.value.height);\r\n\r\n    analyzer.value?.getByteFrequencyData(dataArray);\r\n\r\n    drawVisualizer(bufferLength, dataArray, ctx, canvasRef.value);\r\n  }\r\n\r\n  requestAnimationFrame(animate);\r\n}\r\n\r\nconst drawVisualizer = (\r\n  bufferLength: number,\r\n  dataArray: Uint8Array,\r\n\r\n  ctx: CanvasRenderingContext2D,\r\n  canvas: HTMLCanvasElement\r\n) => {\r\n  const style = getComputedStyle(document.body);\r\n  ctx.fillStyle = style.getPropertyValue(\"--font-color\");\r\n\r\n  let barHeight;\r\n  const barWidth = canvas.width / 2 / bufferLength;\r\n  let firstX = 0;\r\n  let secondX = bufferLength * barWidth;\r\n\r\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n  fixDpi();\r\n\r\n  const maxDataArrayValue = 255;\r\n\r\n  for (let i = 0; i < bufferLength; i++) {\r\n    barHeight = (dataArray[i] / maxDataArrayValue) * canvas.height;\r\n    // const red = (i * barHeight) / 10;\r\n    // const green = i * 4;\r\n    // const blue = barHeight / 4 - 12;\r\n\r\n    roundRect(ctx, canvas.width / 2 - firstX, (canvas.height - barHeight) / 2, barWidth / 1.7, barHeight, 30);\r\n    roundRect(ctx, secondX, (canvas.height - barHeight) / 2, barWidth / 1.7, barHeight, 30);\r\n\r\n    //ctx.fillRect(canvas.width / 2 - firstX, canvas.height - barHeight, barWidth - 1, barHeight);\r\n    firstX += barWidth;\r\n    //ctx.fillRect(secondX, canvas.height - barHeight, barWidth - 1, barHeight);\r\n    secondX += barWidth;\r\n  }\r\n};\r\n\r\nconst fixDpi = () => {\r\n  const dpi = window.devicePixelRatio;\r\n\r\n  if (canvasRef.value) {\r\n    const height = +getComputedStyle(canvasRef.value).getPropertyValue(\"height\").slice(0, -2);\r\n    //get CSS width\r\n    const width = +getComputedStyle(canvasRef.value).getPropertyValue(\"width\").slice(0, -2);\r\n    //scale the canvas\r\n    canvasRef.value.setAttribute(\"height\", (height * dpi).toString());\r\n    canvasRef.value.setAttribute(\"width\", (width * dpi).toString());\r\n  }\r\n};\r\n\r\nconst roundRect = function (\r\n  ctx: CanvasRenderingContext2D,\r\n  x: number,\r\n  y: number,\r\n  width: number,\r\n  height: number,\r\n  radius: number\r\n) {\r\n  if (width < 2 * radius) {\r\n    radius = width / 2;\r\n  }\r\n  if (height < 2 * radius) {\r\n    radius = height / 2;\r\n  }\r\n  const color = getComputedStyle(document.body).getPropertyValue(\"--font-color\");\r\n\r\n  ctx.fillStyle = color;\r\n  ctx.beginPath();\r\n  ctx.moveTo(x + radius, y);\r\n  ctx.arcTo(x + width, y, x + width, y + height, radius);\r\n  ctx.arcTo(x + width, y + height, x, y + height, radius);\r\n  ctx.arcTo(x, y + height, x, y, radius);\r\n  ctx.arcTo(x, y, x + width, y, radius);\r\n  ctx.closePath();\r\n\r\n  ctx.fill();\r\n};\r\n\r\nconst setAnalyzer = () => {\r\n  if (props.audioElement && canvasRef.value) {\r\n    const mediaElement = audioCtx.value.createMediaElementSource(props.audioElement);\r\n\r\n    analyzer.value = audioCtx.value.createAnalyser();\r\n\r\n    mediaElement.connect(analyzer.value);\r\n    analyzer.value.connect(audioCtx.value.destination);\r\n\r\n    analyzer.value.smoothingTimeConstant = 0.9;\r\n    analyzer.value.fftSize = 32;\r\n\r\n    animate();\r\n  }\r\n};\r\n\r\nonMounted(async () => {\r\n  setAnalyzer();\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"canvas\", {\n    id: \"canvas-audio\",\n    ref_key: \"canvasRef\",\n    ref: canvasRef,\n    class: \"audio-canvas\"\n  }, null, 512))\n}\n}\n\n})","import script from \"./AudioAnalyzer.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./AudioAnalyzer.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./AudioAnalyzer.vue?vue&type=style&index=0&id=62953aa2&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\coding\\\\web-apps\\\\desktop-web\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-62953aa2\"]])\n\nexport default __exports__","import script from \"./AudioPlayer.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./AudioPlayer.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./AudioPlayer.vue?vue&type=style&index=0&id=66c3a46a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\coding\\\\web-apps\\\\desktop-web\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-66c3a46a\"]])\n\nexport default __exports__"],"names":["_defineComponent","__name","props","audioElement","Object","setup","__props","canvasRef","ref","analyzer","audioCtx","window","AudioContext","animate","value","bufferLength","frequencyBinCount","dataArray","Uint8Array","ctx","getContext","clearRect","width","height","getByteFrequencyData","drawVisualizer","requestAnimationFrame","canvas","style","getComputedStyle","document","body","barHeight","fillStyle","getPropertyValue","barWidth","firstX","secondX","fixDpi","maxDataArrayValue","i","roundRect","dpi","devicePixelRatio","slice","setAttribute","toString","x","y","radius","color","beginPath","moveTo","arcTo","closePath","fill","setAnalyzer","mediaElement","createMediaElementSource","createAnalyser","connect","destination","smoothingTimeConstant","fftSize","onMounted","_ctx","_cache","_openBlock","_createElementBlock","id","ref_key","class","__exports__","_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","_createElementVNode","_hoisted_2","itemDialog","type","Number","required","dynamicIslandStore","useDynamicIslandStore","audioRef","audioSource","watch","isCollapsed","newValue","oldValue","dynamicIslandItem","componentPath","itemDialogGuid","guid","addDynamicIslandItem","removeDynamicIslandItem","path","audioData","fileSystem","_normalizeStyle","_createBlock","AudioAnalyzer","key","_createCommentVNode","autoplay","controls","src"],"sourceRoot":""}