"use strict";(self["webpackChunkmy_portfolio"]=self["webpackChunkmy_portfolio"]||[]).push([[8058,6396],{26396:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});a(3462);var i=a(73396),o=a(44870),l=(0,i.aZ)({props:{audioElement:Object},setup(e){const t=e,a=(0,o.iH)(),l=(0,o.iH)(null),n=(0,o.iH)(new window.AudioContext);function u(){if(a.value&&l.value){const e=l.value.frequencyBinCount,t=new Uint8Array(e),i=a.value.getContext("2d");i?.clearRect(0,0,a.value.width,a.value.height),l.value?.getByteFrequencyData(t),c(e,t,i,a.value)}requestAnimationFrame(u)}const c=(e,t,a,i)=>{const o=getComputedStyle(document.body);let l;a.fillStyle=o.getPropertyValue("--font-color");const n=i.width/2/e;let u=0,c=e*n;a.clearRect(0,0,i.width,i.height),r();const s=255;for(let r=0;r<e;r++)l=t[r]/s*i.height,d(a,i.width/2-u,(i.height-l)/2,n/1.7,l,30),d(a,c,(i.height-l)/2,n/1.7,l,30),u+=n,c+=n},r=()=>{const e=window.devicePixelRatio;if(a.value){const t=+getComputedStyle(a.value).getPropertyValue("height").slice(0,-2),i=+getComputedStyle(a.value).getPropertyValue("width").slice(0,-2);a.value.setAttribute("height",(t*e).toString()),a.value.setAttribute("width",(i*e).toString())}},d=function(e,t,a,i,o,l){i<2*l&&(l=i/2),o<2*l&&(l=o/2);const n=getComputedStyle(document.body).getPropertyValue("--font-color");e.fillStyle=n,e.beginPath(),e.moveTo(t+l,a),e.arcTo(t+i,a,t+i,a+o,l),e.arcTo(t+i,a+o,t,a+o,l),e.arcTo(t,a+o,t,a,l),e.arcTo(t,a,t+i,a,l),e.closePath(),e.fill()},s=()=>{if(t.audioElement&&a.value){const e=n.value.createMediaElementSource(t.audioElement);l.value=n.value.createAnalyser(),e.connect(l.value),l.value.connect(n.value.destination),l.value.smoothingTimeConstant=.9,l.value.fftSize=32,u()}};return(0,i.bv)((async()=>{s()})),(e,t)=>((0,i.wg)(),(0,i.iD)("canvas",{id:"canvas-audio",ref_key:"canvasRef",ref:a,class:"audio-canvas"},null,512))}}),n=a(40089);const u=(0,n.Z)(l,[["__scopeId","data-v-62953aa2"]]);var c=u},28058:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var i=a(73396),o=a(87139),l=a(44870),n=a(59025),u=a(26396),c=a(75246);const r=e=>((0,i.dD)("data-v-66c3a46a"),e=e(),(0,i.Cn)(),e),d=r((()=>(0,i._)("div",{id:"waveform"},null,-1))),s=["src"];var v=(0,i.aZ)({props:{itemDialog:Object,height:{type:Number,required:!0}},setup(e){const t=e,a=(0,c.Z)(),r=(0,l.iH)(),v=(0,l.iH)();return(0,i.YP)((()=>t.itemDialog?.isCollapsed),(async function(e,i){if(e){const e={componentPath:"audioItem/AudioWidget.vue",itemDialogGuid:t.itemDialog?.guid||"",audioElement:r.value};a.addDynamicIslandItem(e)}else a.removeDynamicIslandItem(t.itemDialog?.guid||"")})),(0,i.bv)((async()=>{if(t.itemDialog?.path){const e=await n.Z.readFile(t.itemDialog?.path);v.value=e}})),(t,a)=>((0,i.wg)(),(0,i.iD)("div",{style:(0,o.j5)([`height: ${e.height}px; width: calc(100% -4px); `,{position:"relative"}])},[d,(0,i._)("div",{style:(0,o.j5)(`height: ${e.height-80}px; padding: calc(var(--margin)*2) `)},[v.value?((0,i.wg)(),(0,i.j4)(u["default"],{key:0,audioElement:r.value},null,8,["audioElement"])):(0,i.kq)("",!0)],4),(0,i._)("audio",{autoplay:"",class:"audio-controls",id:"audio",controls:"",ref_key:"audioRef",ref:r,src:v.value},null,8,s)],4))}}),g=a(40089);const h=(0,g.Z)(v,[["__scopeId","data-v-66c3a46a"]]);var m=h}}]);
//# sourceMappingURL=8058.d732c16a.js.map